회원가입 로그인 로그아웃기능

중요한 기능이다.

그래야 웹서비스다운 웹서비스를 만들 수 있다.

유저확장과 인증은 어떤 것을 하는건가?

예를 들어 사람들이 서버에 어떠한 요청을 한다.

인스타그램으로 요청을 보내요. 메인페이지에 글들이 똑같지가 않다.

사용자에 따라서 페이지에 보여주는 것이 다르다.

어떻게 이를 구별할까?

 이를 구별하기 위해서는 a라는 사람과 b라는 사람 정보를 가지고 있는 유저 테이블을 가지고 있어야한다. 장고는 유저테이블을 지원해준다. 우리는 이미 사용해봤다.

사실 저번 admin 패널에서 본적이 있다.

<Users>라는 것을 들어가면 이 페이지에 들어오기 위해서 슈퍼유저를 만들었던게 보인다.

슈퍼유저로 접속하면 이것저것들이 다 보인다.

여기서 유저를 만들 수도 있다.

가상환경을 키고 장고를 깔면 model에 user model이 다 있다.

만약 우리가 유저컬럼말고 에브리타임 비슷한걸 하고 싶으면 컬럼에 대학교도 해야하고, 소개팅 어플이면 남자인지 여자인지 나타내는 컬럼도 있어야된다.

 그래서 우리가 실제로 개발할 때는 장고에서 쓸 유저만으로는 부족합니다.

colmn을 더 추가해야한다.

이때 우리는 유저를 대체할 테이블을 만들면 된다.

장고에서 만들어져 있는 것을 교체하면 된다.

기본적인 정보들은 굉장히 예민한 정보이기 때문에 괄호안에 있는게 클래스인데 클래스안에 있는 변수나 메소드들을 그대로 갖다 사용할 수 있다. 그래서 우리는 유저를 대체할 테이블을 만든 다음에 컬럼들을 추가해서 제공받는 유저에서 확장을 시킨다.

### auth

장고에서 회원을 저장하는 유저테이블이 있고 확장까지 할 수 있다는건 잘 알겠는데

그걸로 어떻게 회원관리를 하는거지? 라는 의문이 있을 수 있다.

장고에서 그래서 Authentication(인증)이라는 것을 제공해 준다.

이것은 요청에 대한 인증을 뜻한다.

어떤 원리냐면 클라이언트가 서버에 폼에 회원 정보 요청을 보내면 서버에서 유저 테이블에 회원정보가 작성된 것을 저장 시키고, 그것을 가지고 클라이언트가 다시 로그인 요청을 하게 되면 유저테이블에 이런 회원이 있는지 본다음에 클라이언트에게 서버가 중요한 정보를 준다.

예를 들어 클라이언트는 21학번 새내기고 시간표 짜기 위해 에타에 회원가입 요청을 보낸다. 거기에 대학정보가 있고 그 회원정보를 가지고 로그인합니다. 에타 서버가 유저가 맞는지 확인하고 토큰을 보내준다. 새내기가 하버드대면 하버드대 요청을 보내준다. 하버드대에 어떤 서버가 있는지 그거에 맞춰서 정보를 보내준다. 인증이라는 것은 이런식이다.

### 인증에 사용하는 모듈

우리가 발급을 직접하지는 않는다.

장고에서 처리해주는 모듈이 있기 때문이다.

인증과 관련된 모듈은 다음과 같다.

- authenticate
- login
- logout

이 세가지 함수 통해서 클라이언트 인증을 관리한다.

authenticate는 클라이언트에서 요청된 user name과 password이 유저 테이블에 있는 데이터와 같은 유저가 있는지 확인해주는 함수다. 그리고 login은 유저테이블에서 온 객체를 통해 클라이언트를 인증된 상태로 있을 수 있도록 만들어주는 함수다. 이것이 login 기능이다. 인증된 클라이언트가 서버에 요청을 보낼때마다 request해 유저가 가져와(필요한 데이터를) 쓸 수 있다. 객체가 같이 요청 정보에 포함돼서 서버에 날아가 게된다. 그래서 서버는 요청을 통해 클라이언트 유저를 맘대로 조작할 수 있고, 해당 유저에 대해 응답보낼 수 있는 기능도 만들 수 있게 된다. 그리고 logout은 인증을 풀어달라는 요청을 한다.

 우리는 실습강의부터 유저테이블에 정보를 추가할 수 있는 회원가입 기능, 유저를 인증시켜주는 로그인기능을 할거고, 인증을 풀어주는 로그아웃 기능도 만들어주도록 하겠다.
